sudo: required
dist: trusty
language: node_js
node_js:
  - '6.9.1'
  - 'stable'
addons:
  apt:
    sources:
      - google-chrome
      - ubuntu-toolchain-r-test
    packages:
      - google-chrome-stable
      - g++-4.8
  firefox: 'latest-esr'
cache:
  directories:
  - node_modules
env:
  matrix:
    - EMBER_TRY_SCENARIO=ember-2-3
    - EMBER_TRY_SCENARIO=ember-2-8
    - EMBER_TRY_SCENARIO=default
    - EMBER_TRY_SCENARIO=ember-release
  global:
    - CXX=g++-4.8
    - secure: kTQ4FcrtE1o6LeWD4OZTWG77Newoska5fAFCkQYdogXNyFZ9CYSEPzGu1dRmTnQxt+bKOJ+ms662WCXuD7G/I7nnxt1WqW1lrdbLYwsLYMUGTNFDFfEdtyVQdIcfsjWRTmqlr2/k6VNS3790boIoDEY5dM2UneN2NemHykhxE1CiyuvphHh4zDgJUxigOumGU04+P2P9R7SrW13FnMeNxFVzerbMfsHLVEj93qsHUTYaVE69oF6HCh+QbL9fKySHa2uKWmLx2vSuinmGs4e3dT2PkIn2L/rOlRlcvIndH0QBIBqAo/og6EBW9k4kWDhKbi3e3cT7swc6DdGAQo+imQ6BdPYzVZE87eCmJvimPy3kdKpRANzE+89UthO0xUsjLhQ0B8yTrSbfT1YyZ4HhSRDGI3Uy3/+NW/o83QuXQeSBYd2ucso7MKOvNzM4KeO+FjiVQMpXKNyHmXs0oPEDzqpcazcnfxx92fSjycHwb11Kj0L/rR0Do8afPcwyZpqFSOMZRR57HnFN44XAqTO6MfvvjYHSjmL0LSoCcf7Kt2YuYe1u8HYYFPQ4L6QFtz73eYoPmMc5HA6C6HBRjYcS25gUqD6tCYEWPtbnlcxL4Yc+ZgBqsDDWs2497NYy172SzuF5IT0jUKjrXFy5xp5VTPW6+UhoWWoPH8kXW9nmp+o=
matrix:
  fast_finish: true
  allow_failures:
    - env: EMBER_TRY_SCENARIO=ember-release
before_install:
  - npm config set spin false
  - npm install -g coveralls pr-bumper@^1.0.0
  - $(npm root -g)/pr-bumper/.travis/maybe-check-scope.sh
install:
  - $(npm root -g)/pr-bumper/.travis/maybe-install.sh
before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3 # give xvfb some time to start
script:
  - $(npm root -g)/pr-bumper/.travis/maybe-test.sh
  - .travis/maybe-publish-gh-pages.sh
  - .travis/maybe-bump-version.sh
after_success:
  - .travis/maybe-publish-coverage.sh
deploy:
  provider: npm
  email: npm.ciena@gmail.com
  skip_cleanup: true
  api_key:
    secure: ESPMbZwhsrfGfO/p+f5ykZFWImTxNHe8Wab2+EZge87P8ZojO0JhkpnpCM8p9mrHOz+gp2exzGViyjS1FoIRw8yr0kV2fbuCUhZy014nft9WtGnwGs/f9y7odFBOGIlRg4i23VtRjKtE9xsNdS6bOORtxg6IK/b9l25sd+dEhhPG29HkWmGGnjCeWFGTRum0jF7HMCRAp1FSKvELIdDegBs9qxMuv5yu5ozGRyjufwXRSkWd9o0FQDTweJPqGF+izkf5am8q0jbYRlZdUBCMw4Ew4bhtmx1oDOmUO+WgPUCPzfXirvwsMTQaaK2em5PIF78S2yQNh8PTziRcOOMmXGnKmZwcypsQ2Bd6GDOOG6vsXZ9cMpWpnCpPPx44bR2jwuwUrSfjSPv3OJgZIo4RP75NIPv46tST0JdFqth+kEBtCzHNgpQWyBUUFIyoqSjkTKk4WHA/JVHIrOamp0WoZnG/e9CwuC3IXh4fIlyjI6rTMjP9U82Z+rxNmk149WoQ9ilYqlcVv+xUjQsb4zRda7LGeHGzG5f4onwdv4Pg0BiHkKAwYLClwV1GAK6+oQsyw2jpyW4dRuR79zp0dw+cluad78x4mKhqJkf5HmqTsrwDdfAn27WzOW8YT12iaULnn/IE1xBfVNEp8AqMUAxPcEUjusOx3o+TAb4m9ale7cg=
  on:
    all_branches: true
    condition: "$EMBER_TRY_SCENARIO = 'default'"
    node: '6.9.1'
    tags: true
notifications:
  slack:
    secure: GzRGMb3myLs+tzUB4L0ZfOoR9IX6u/Ulr6aqeNImlOKeMAPU/fJ9H4Pb1ReQ2wnIZBTtY0N7C/egbEEhBaLA+6DQR2cJ204kHyotrd4GiI2Jb0JIWtZ71RxyM6kFhW6X+jy8kdsAb8gs+q277CiopBRm1bXSHT5SAhpm83ArgJFJFFagWmxKW7YBl28d2/efpm5BSqQ4jMKHeLwarrpv666bvWnPI7bJSY7q6c6JK4Pv/89tmp5CsZFCXRnAWITER/kgCd/2bj02lKaMNaugiZAzL+j92YobpAfAp8jP6JbFwwRHSZiPo5HZH4IitlE1Ccvb/xrNzy5vtOiu0JdZVc4NfkHwaJezOQP8gPHmalTORTWddeZAATGCvmz9xmYRNDbqtAHo0WjKbzPkBnYMn+IYrWNz8gb0pS1zRZXPFHSKusr5+i/3xQv+q/thSoKkuEnibvb3+tlydO++GaI1YaoUhfY70OeuLF9CIBovLwmj/5QRhXKjFArqIzjaV1DQrSVxpOa8nnvc1w5cw+JQaabSvIP8ln0P3D68JEtJ67Mx2itapWhn1VfSgkT/Bwx3AONvsZ+/R/rGFMDe8t5nqUMKYcCwdboOzG/eqMKpPQ3j2QeNGD/Dp9zWNwdMZVIIhcRpj2E547KewOpZmF+VbbAfHxRQChn9kcvRDP+Wuoc=
